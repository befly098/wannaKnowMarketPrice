<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.min.js"></script>

    <title>?EolmaNi?</title>
    <style>
      @font-face { font-family: 'GmarketSansLight'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansLight.woff') format('woff'); font-weight: normal; font-style: normal; }
      @font-face { font-family: 'S-CoreDream-3Light'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff') format('woff'); font-weight: normal; font-style: normal; }
      @font-face { font-family: 'GmarketSansMedium'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff'); font-weight: normal; font-style: normal; }
      @font-face { font-family: 'S-CoreDream-2ExtraLight'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-2ExtraLight.woff') format('woff'); font-weight: normal; font-style: normal; }
      nav{
        font-family:'Titillium Web', sans-serif;
        font-weight:600;
      }
      nav div{
        font-family:'Titillium Web', sans-serif;
        font-weight:300;
      }
      .nav-item{
        font-family: 'GmarketSansMedium';
      }
    
      div{
        font-family: 'S-CoreDream-3Light';
      }

    </style>
    <script>
      $(document).ready(function(){

        $('#exampleModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget) 
    var recipient = button.data('whatever')
    var modal = $(this)
    modal.find('.modal-title').text('개발자에게 문의하기');
    modal.find('.modal-body input').val(recipient)
  })
  $('#send').click(function(){
    var text = $('#message-text').val()
    $('#mailhyperlink').attr('href',"mailto:jhshin0028@gmail.com?subject=complain&body="+tex)
  });
      })
</script>
<link rel="icon" 
type="image/png" 
href="../static/money.png">
  </head>
  <body style = "overflow-x:hidden;overflow-y: scroll; position:relative;">
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">New message</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="message-text" class="col-form-label">문의 사항:</label>
                <textarea class="form-control" id="message-text"></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
            <a id = "mailhyperlink" href ="mailto:jhshin0028@gmail.com?subject=complain&body=냐냐"> <button id = "send" type="button" class="btn btn-primary">전송</button></a>
          </div>
        </div>
      </div>
    </div>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="../">Eolmani?!</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="../">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="../RealTimePrice">실시간 가격 확인  <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="../PriceChange">시세 변동 현황 <span class="sr-only">(current)</span></a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
          </form>
        </div>
      </nav>
    </header>
    <nav class="nav nav-justified"id ="sticky-bar"style="margin-top:33px;">
      <a class="nav-item nav-link active" href="#a" style="color: red;">Auction</a>
      <a class="nav-item nav-link" href="#b" style="color: rgb(42, 226, 17);">SSG</a>
      <a class="nav-item nav-link" href="#c" style="color: rgb(235, 114, 33);">Tmon</a>
      <a class="nav-item nav-link" href="#d" style="color: rgb(211, 18, 163);">Interpark</a>
    </nav>
    <div class = "container-fluid" style = "height:50px;"></div>
    <div class = "container"style = "height:2700px;"data-spy="scroll"data-target="#sticky-bar">
      <div class ="container-fluid"style = "font-weight:600;font-size:33px;">
        <img src="{{url_for('static',filename='game-controller.png')}}" style="width: 33px;"/>
          <strong>일주일 간 시세 변동</strong>
          <hr style="width: auto;"/>
      </div>
        <canvas id="myChart" height="100"></canvas>
        <script>

          var today = new Date();
          var date_today = today.getDate();
          var month_today = today.getMonth();
          month_today*=1;
          month_today+=1;
          var ctx = document.getElementById('myChart');

          //어제~일주일 전
            function getDateArray(date,month){
            var arr = new Array();
            var flag = 1;
           date *=1;
           //오늘 날짜 보관
           var date_yesterday = date;
           var flag = 1;
          
          for(var i=0;i<7;i++)
           {
             var cur_date= date_yesterday - (i+1);
             if(cur_date<1)
             {
               cur_date = 30- (i);
               if(flag)
               {
                 month -=1;
                 flag = 0;
               }
             }
              arr[6-i] = String(month) + '/' + String(cur_date)
 
            }
            return arr;
          }
          var data_arr =  getDateArray(date_today,month_today);

          //data 가공
          function getDataArr(str){
        
        var strSplit = str.split(',');
        var DataArr = new Array();

        for (var i in strSplit){
          var res;

              if(i==0)
              {
                res = strSplit[i].split('[');
                strSplit[i]= res[1];
              }
              else if (i ==(strSplit.length-1))
              {
                res = strSplit[i].split(']');
                strSplit[i]= res[0];
              }
              DataArr.push(strSplit[i]*1);
    
        }
        return DataArr
      }
          var myChart = new Chart(ctx, {
          type: 'line',
          data: {
          labels: data_arr,
        datasets: [{
            label: 'Auction',
            data: getDataArr('{{resultAuction}}'),
            backgroundColor: [
                'rgba(255, 9, 13, 0.2)',
            ],
            borderColor: [
                'rgba(255, 9, 13, 1)',
            ],
            borderWidth: 1
        },
        {
            label: 'SSG',
            data: getDataArr('{{resultNaver}}'),
            backgroundColor: [
                'rgba(67, 219, 61, 0.2)',
            ],
            borderColor: [
                'rgba(67, 219, 61, 1)',
            ],
            borderWidth: 1
        },
                {
            label: 'Tmon',
            data: getDataArr('{{resultTmon}}'),
            backgroundColor: [
                'rgb(217, 105, 50,0.2)',
            ],
            borderColor: [
                'rgb(217, 105, 50,1)',
            ],
            borderWidth: 1
        },
        {
            label: 'Interpark',
            data: getDataArr('{{resultInterpark}}'),
            backgroundColor: [
            'rgb(211, 18, 163,0.2)',
            ],
            borderColor: [
            'rgb(211, 18, 163)',
            ],
            borderWidth: 1
        }
        ]
    },
    options: {
      yAxes: [{
                ticks: {
                  beginAtZero: true
                }
            }]
    }
});
      </script>

<div id = "a"class ="container-fluid"style = "font-weight:600;font-size:33px;margin-top:83px;">
  <img src="{{url_for('static',filename='game-controller.png')}}" style="width: 33px;"/>
    <strong>일주일간 시세 변화 - Auction</strong>
    <hr style="width: auto;"/>
    <canvas id="myAuctionChart" height="100"></canvas>

</div>
<div id = "b"class ="container-fluid"style = "font-weight:600;font-size:33px;margin-top:83px;">
  <img src="{{url_for('static',filename='game-controller.png')}}" style="width: 33px;"/>
    <strong>일주일간 시세 변화 - SSG</strong>
    <hr style="width: auto;"/>
    <canvas id="myNaverChart" height="100"></canvas>
</div>
<div id = "c"class ="container-fluid"style = "font-weight:600;font-size:33px;margin-top:83px">
  <img src="{{url_for('static',filename='game-controller.png')}}" style="width: 33px;"/>
    <strong>일주일간 시세 변화 - Tmon</strong>
    <hr style="width: auto;"/>
    <canvas id="myTmonChart" height="100"></canvas>
  </div>

<div id = "d"class ="container-fluid"style = "font-weight:600;font-size:33px;margin-top:83px">
  <img src="{{url_for('static',filename='game-controller.png')}}" style="width: 33px;"/>
    <strong>일주일간 시세 변화 - Interpark</strong>
    <hr style="width: auto;"/>
    <canvas id="myInterparkChart" height="100"></canvas>
  </div>
</div>
    <script>
      //auction
      var today = new Date();
      var date_today = today.getDate();
      var month_today = today.getMonth();
      var ctx = document.getElementById('myAuctionChart');

      //auction
      var myChart_auction = new Chart(ctx, {
      type: 'line',
      data: {
        labels: data_arr,
             datasets: [{
        label: 'Auction',
        data: getDataArr('{{resultAuction}}'),
        backgroundColor: [
            'rgba(255, 9, 13, 0.2)',
        ],
        borderColor: [
            'rgba(255, 9, 13, 1)',
        ],
        borderWidth: 1
    }
    ]
},
options: {
    scales: {
        yAxes: [{
            ticks: {
                beginAtZero: true
            }
        }]
    }
}
});
      // naver

       ctx = document.getElementById('myNaverChart');

      var myChart_naver= new Chart(ctx, {
      type: 'line',
      data: {
        labels: data_arr,
        datasets: [{
        label: 'SSG',
        data: getDataArr('{{resultNaver}}'),
        backgroundColor: [
        'rgba(67, 219, 61, 0.2)',],
        borderColor: [
        'rgba(67, 219, 61, 1.0)',],
        borderWidth: 1
    }
    ]
},
options: {
    scales: {
        yAxes: [{
            ticks: {
                beginAtZero: true
            }
        }]
    }
}
});
      // tmon

       ctx = document.getElementById('myTmonChart');

      var myChart_tmon = new Chart(ctx, {
      type: 'line',
      data: {
        labels: data_arr,    
        datasets: [{
        label: 'Tmon',
        data: getDataArr('{{resultTmon}}'),
        backgroundColor: [
        'rgb(217, 105, 50,0.2)',       ],
        borderColor: [
        'rgb(217, 105, 50,1.0)',        ],
        borderWidth: 1
    }
    ]
},
options: {
    scales: {
        yAxes: [{
            ticks: {
                beginAtZero: true
            }
        }]
    }
}
});
      // Interpark

      ctx = document.getElementById('myInterparkChart');

var myChart_tmon = new Chart(ctx, {
type: 'line',
data: {
  labels: data_arr,    
  datasets: [{
  label: 'Interpark',
  data: getDataArr('{{resultInterpark}}'),
  backgroundColor: [
  'rgb(211, 18, 163,0.2)',       ],
  borderColor: [
  'rgb(211, 18, 163)',        ],
  borderWidth: 1
}
]
},
options: {
scales: {
  yAxes: [{
      ticks: {
          beginAtZero: true
      }
  }]
}
}
});
</script>
    </div>
    </div>
       <footer class = "footer"style="z-index:10;">
    <div class = "container-fluid" style = "background-color: #a2a4b3; position: fixed;bottom:0;">
      <div class="row">
        <div class="col"style ="text-align:center;">
          <p style = "padding-top:5px;color:whitesmoke;"><strong>| Copyright | </strong></p>
            <p style = "font-family: S-CoreDream-2ExtraLight;color:whitesmoke;">박서린<br/>
                      신준희</p>
        </div>
        <div class="col"style ="text-align:center;color:whitesmoke;vertical-align:center;">
            <button type = "button" class = "btn btn-primary" data-toggle="modal" data-target="#exampleModal"data-whatever="abcdxx@gmail.com" style="border-radius: 20px;margin-top:10px;" >
              <img src="{{url_for('static',filename='mail.png')}}" style="width:22px;padding-bottom: 8px;"/>
              개발자에게 문의하기
            </button>
        </div>
        <div class="col"style ="text-align:center;color:whitesmoke;">
           <p>경북대학교 컴퓨터학부</p>
        </div>
      </div>
    </div>
  </footer>
  
  </body>
</html>